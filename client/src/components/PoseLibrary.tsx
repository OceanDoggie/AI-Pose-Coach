import React, { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport { Target, Filter, Search } from 'lucide-react';\nimport { Input } from '@/components/ui/input';\nimport { POSE_TEMPLATES, POSE_CATEGORIES } from '@/data/poses';\nimport type { PoseTemplate } from '@shared/schema';\n\ninterface PoseLibraryProps {\n  selectedPose: PoseTemplate | null;\n  onPoseSelect: (pose: PoseTemplate) => void;\n  onClose: () => void;\n}\n\nexport default function PoseLibrary({ selectedPose, onPoseSelect, onClose }: PoseLibraryProps) {\n  const [selectedCategory, setSelectedCategory] = useState('all');\n  const [searchQuery, setSearchQuery] = useState('');\n  \n  const filteredPoses = POSE_TEMPLATES.filter(pose => {\n    const matchesCategory = selectedCategory === 'all' || pose.tags.includes(selectedCategory);\n    const matchesSearch = searchQuery === '' || \n      pose.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      pose.tags.some(tag => tag.toLowerCase().includes(searchQuery.toLowerCase()));\n    return matchesCategory && matchesSearch;\n  });\n\n  return (\n    <div className=\"h-full flex flex-col bg-background\">\n      {/* Header */}\n      <div className=\"p-4 border-b\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div>\n            <h2 className=\"text-xl font-semibold\">姿势库 / Pose Library</h2>\n            <p className=\"text-sm text-muted-foreground mt-1\">\n              选择一个姿势开始拍摄 / Choose a pose to start shooting\n            </p>\n          </div>\n          <Button variant=\"ghost\" onClick={onClose} data-testid=\"button-close-library\">\n            ✕\n          </Button>\n        </div>\n        \n        {/* Search */}\n        <div className=\"relative mb-4\">\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n          <Input\n            placeholder=\"搜索姿势... / Search poses...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"pl-10\"\n            data-testid=\"input-search-poses\"\n          />\n        </div>\n        \n        {/* Category Filters */}\n        <div className=\"flex gap-2 overflow-x-auto pb-2\">\n          {POSE_CATEGORIES.map(category => (\n            <Button\n              key={category.id}\n              variant={selectedCategory === category.id ? \"default\" : \"outline\"}\n              size=\"sm\"\n              onClick={() => setSelectedCategory(category.id)}\n              className=\"whitespace-nowrap\"\n              data-testid={`button-category-${category.id}`}\n            >\n              <span className=\"mr-1\">{category.icon}</span>\n              {category.name}\n            </Button>\n          ))}\n        </div>\n      </div>\n      \n      {/* Pose Grid */}\n      <ScrollArea className=\"flex-1 p-4\">\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n          {filteredPoses.map(pose => (\n            <Card \n              key={pose.id}\n              className={`cursor-pointer transition-all hover-elevate ${\n                selectedPose?.id === pose.id ? 'ring-2 ring-primary border-primary' : ''\n              }`}\n              onClick={() => onPoseSelect(pose)}\n              data-testid={`card-pose-${pose.id}`}\n            >\n              <CardHeader className=\"pb-3\">\n                <CardTitle className=\"text-base line-clamp-2\">\n                  {pose.name}\n                </CardTitle>\n              </CardHeader>\n              \n              <CardContent>\n                {/* Mock pose preview */}\n                <div className=\"w-full h-32 bg-muted rounded-md mb-3 flex items-center justify-center\">\n                  <div className=\"relative w-16 h-24\">\n                    {/* Simplified stick figure representation */}\n                    <div className=\"absolute top-2 left-1/2 w-2 h-2 bg-primary rounded-full transform -translate-x-1/2\" />\n                    <div className=\"absolute top-6 left-1/2 w-1 h-8 bg-primary transform -translate-x-1/2\" />\n                    <div className=\"absolute top-8 left-4 w-1 h-6 bg-primary transform rotate-12\" />\n                    <div className=\"absolute top-8 right-4 w-1 h-6 bg-primary transform -rotate-12\" />\n                    <div className=\"absolute bottom-4 left-4 w-1 h-8 bg-primary\" />\n                    <div className=\"absolute bottom-4 right-4 w-1 h-8 bg-primary\" />\n                  </div>\n                </div>\n                \n                {/* Tags */}\n                <div className=\"flex flex-wrap gap-1 mb-3\">\n                  {pose.tags.slice(0, 3).map(tag => (\n                    <Badge key={tag} variant=\"secondary\" className=\"text-xs\">\n                      {tag}\n                    </Badge>\n                  ))}\n                </div>\n                \n                {/* Instructions preview */}\n                {pose.sequence && pose.sequence.length > 0 && (\n                  <div className=\"text-xs text-muted-foreground\">\n                    <p className=\"line-clamp-2\">{pose.sequence[0]}</p>\n                  </div>\n                )}\n                \n                {/* Selection indicator */}\n                {selectedPose?.id === pose.id && (\n                  <div className=\"mt-3 flex items-center text-primary text-sm font-medium\">\n                    <Target className=\"w-3 h-3 mr-1\" />\n                    已选择 / Selected\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n        \n        {filteredPoses.length === 0 && (\n          <div className=\"text-center py-12\">\n            <Filter className=\"w-12 h-12 mx-auto text-muted-foreground mb-4\" />\n            <p className=\"text-lg font-medium mb-2\">没有找到姿势</p>\n            <p className=\"text-sm text-muted-foreground\">No poses found matching your criteria</p>\n          </div>\n        )}\n      </ScrollArea>\n    </div>\n  );\n}\n"